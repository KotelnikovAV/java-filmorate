![Untitled (1)](https://github.com/KotelnikovAV/java-filmorate/assets/155972005/48aefdcd-35e2-4d01-b9d5-df53e52413b0)

# Описание ER-диаграммы к приложению filmorate.
## Структура базы данных к приложению filmorate.
База данных (далее БД) к приложению filmorate состоит из следующих таблиц: 
- films (таблица хранения фильмов);
- users (таблица хранения пользователей);
- films_like (таблица хранения лайков фильмов);
- adding_friends (таблица хранения друзей);
- mpa (таблица хранения рейтингов);
- genre (таблица хранения жанров фильмов);
- directors (таблица хранения режисеров).

## Структура таблицы adding_friends.
Таблица состоит из 4 полей:
- outgoing_request_user_id (id пользователя, который отправил заявку на добавления в друзья);
- incoming_request_user_id (id пользователя, которому пришла заявка на добавления в друзья);
- confimation (true или false - информация о том, была ли принята заявка или нет, по умолчанию false).

### Логика работы таблицы adding_friends.
По умолчанию в поле confimation заполняется значение false. Если пользователь incoming_request_user_id принимает заяку, то в БД происходит попытка добавить новую запись, если находится запись с подходящей комбинацией (порядок неважен), то поле confimation меняется на true.

## Структура таблицы films.
Таблица состоит из 7 полей:
- id (id фильма);
- name (название фильма);
- description (описание фильма);
- releaseDate (дата релиза фильма);
- duration (продолжительность фильма в минутах);
- genre (список id жанров, который хранится в виде varchar);
- mpa_id (внешний ключ, который ссылается на таблицу mpa);
- director_id (внешний ключ, который ссылается на таблицу directors).

### Логика работы таблицы films.
При любом запросе, в котором пользователю должен вернуться фильм происходит следующая логика: создается объект класса Film, который в последствии преобразуется в объект класса FilmDto. Список жанров genre парсится в лист id, который в свою очередь маппится в лист жанров, согласно таблице genre.
